<!DOCTYPE html>
<html lang="en">

<head>
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-6WDM9MQ3SV"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag() { dataLayer.push(arguments); }
		gtag('js', new Date());

		gtag('config', 'G-6WDM9MQ3SV');
	</script>
	<meta charset="utf-8" />
	<link rel="icon" href="../../favicon.png" />
	<meta name="viewport" content="width=device-width" />
	<meta name="keywords" content="robotics,ftc,jamaica,jamaicacollege" />
	<meta name="robot" content="index/follow" />
	<meta name="description" content="Jamaica College's Robotics teams" />

	<!-- Facebook Meta Tags -->
	<meta property="og:url" content="https://jc-robotics.github.io">
	<meta property="og:type" content="website">
	<meta property="og:title" content="JC Robotics - Home">
	<meta property="og:description" content="Jamaica College's Robotics teams">
	<meta property="og:image" content="https://i.imgur.com/sZvDU36.png">

	<!-- Twitter Meta Tags -->
	<meta name="twitter:card" content="summary_large_image">
	<meta property="twitter:domain" content="jc-robotics.github.io">
	<meta property="twitter:url" content="https://jc-robotics.github.io">
	<meta name="twitter:title" content="JC Robotics - Home">
	<meta name="twitter:description" content="Jamaica College's Robotics teams">
	<meta name="twitter:image" content="https://i.imgur.com/sZvDU36.png">


	<meta name="google-site-verification" content="5ZE9_Y0Fjfd9FTy5OOOlMf74oaAyf4x7KfTG4TGzdC0" />
	<meta http-equiv="content-security-policy" content="">
		<link href="../../_app/immutable/assets/_layout-d0f5e456.css" rel="stylesheet">
		<link href="../../_app/immutable/assets/_page-c3d47a5f.css" rel="stylesheet">
		<link rel="modulepreload" href="../../_app/immutable/start-7e576363.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index-c1eee52a.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/singletons-0aa2077c.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/preload-helper-28b7b303.js">
		<link rel="modulepreload" href="../../_app/immutable/components/pages/_layout.svelte-0553e3fb.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/navigation-445ffb37.js">
		<link rel="modulepreload" href="../../_app/immutable/modules/pages/_layout.ts-b8ee4d7c.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/_layout-1daba58d.js">
		<link rel="modulepreload" href="../../_app/immutable/components/pages/resources/blog/_slug_/_page.svelte-63497105.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index-6203779a.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/profiles-ea0b7403.js"><title>Programming Mecanum Wheels</title>
<meta property="og:url" content="https://jc-robotics.github.io/programming-mecanum-wheels">
<meta property="og:type" content="website">
<meta property="og:title" content="Programming Mecanum Wheels">
<meta property="og:description" content="Learn to program mecanum wheels in FTC using Blocks. All math and ideas explained in detail.">
<meta property="og:image" content="https://imgur.com/PDeFHG4.png">


<meta name="twitter:card" content="summary_large_image">
<meta property="twitter:domain" content="jc-robotics.github.io">
<meta property="twitter:url" content="https://jc-robotics.github.io/programming-mecanum-wheels">
<meta name="twitter:title" content="Programming Mecanum Wheels">
<meta name="twitter:description" content="Learn to program mecanum wheels in FTC using Blocks. All math and ideas explained in detail.">
<meta name="twitter:image" content="https://imgur.com/PDeFHG4.png">
	<style>
		@import '@fontsource/bebas-neue';
		@import '@fontsource/montserrat';

		@tailwind base;
		@tailwind components;
		@tailwind utilities;

		* {
			margin: 0;
			padding: 0;
		}

		body {
			min-height: 100vh;
			max-width: 100vw;
		}

		.prose p {
			font-family: 'Montserrat', sans-serif !important;
		}
	</style>
</head>

<body data-sveltekit-prefetch>
	<div class="app">




<nav class="relative container flex justify-between tracking-[0.065em] mb-12 px-10"><div class="flex items-center justify-between w-full">
		<div class="flex justify-center gap-3"><img class="hidden w-8 aspect-square md:flex" src="/_app/immutable/assets/jc-logo-d894bf84.png" alt="JC Logo">

			<h1 class="pl-4 md:p-0 group block pt-2 font-heading font-extrabold uppercase text-3xl relative"><a href="/" class="no-underline group-hover:underline">JC Robotics </a>
				<span class="absolute w-full h-2 rounded-full scale-0 bg-blue-900 group-hover:scale-1"></span></h1></div>

		
<ul class="hidden md:flex w-1/2 justify-around bg-bangladesh-green text-cornsilk text-xl font-bebas-neue rounded-b-sm"><li class="flex "><a class="relative transistion duration-200 p-6 capitalize after:bg-accent isolate after:z-[-10] | link svelte-zhbz9u" href="/">home</a></li><li class="flex "><a class="relative transistion duration-200 p-6 capitalize after:bg-accent isolate after:z-[-10] | link svelte-zhbz9u" href="/resources/blog">blog</a></li><li class="flex "><a class="relative transistion duration-200 p-6 capitalize after:bg-accent isolate after:z-[-10] | link svelte-zhbz9u" href="/about">about</a></li>
</ul>

		
<div class="relative md:hidden w-6 h-5"><div class="absolute inset-0 flex flex-col justify-between -translate-x-5"><span class="origin-top-left relative transistion ease-out duration-300 w-full h-1/4 bg-white rounded-full false"></span>
		<span class="relative transistion ease-out duration-300 w-full h-1/4 bg-white rounded-full translate-x-1 false"></span>
		<span class="origin-bottom-left relative transistion ease-out duration-300 w-full h-1/4 bg-white rounded-full false"></span></div></div>
		
<ul class="transistion right:0 duration-300 ease-in-out md:hidden flex flex-col absolute w-[80%] mt-50 font-bold bg-primary items-center text-cornsilk text-2xl rounded-md font-bebas-neue top-0  drop-shadow-xl py-6 translate-y-16 left-[50%] -translate-x-[50%] -translate-y-96 z-[10000]"><li class="w-full flex justify-center"><a class="w-full flex justify-center py-3 hover:bg-accent" href="/">home</a>
	</li><li class="w-full flex justify-center"><a class="w-full flex justify-center py-3 hover:bg-accent" href="/resources/blog">blog</a>
	</li><li class="w-full flex justify-center"><a class="w-full flex justify-center py-3 hover:bg-accent" href="/about">about</a>
	</li></ul></div></nav>





<article class="prose lg:prose-xl max-w-full px-10 m-auto my-4 sm:my-16 font-body svelte-1me9ak3"><img class="rounded-md max-w-[300px]" src="https://imgur.com/PDeFHG4.png" alt="blog post">
	<h1>Programming Mecanum Wheels</h1>
	<p>Published: 18 November 2022</p>
	<p>By: Orville Daley</p>

	<h2 id="the-physics-of-mecanum">The Physics of Mecanum</h2><p>Mecanum wheels are a unique kind of wheel that, in contrast to conventional wheels, allow for mobility and holonomic strafing. They are made up of a number of rubber rollers that have been turned 45 degrees to the left or right.</p><p>In a typical mecanum drivetrain, sideways motion is produced by turning the wheels on one diagonal in the opposite direction from the wheels on the other diagonal. These wheel motions may be combined to move the vehicle in any direction and make it rotate in any direction.</p><p>The four mecanum wheels in a typical mecanum drive system are arranged in a "X" pattern. This indicates that when viewed from above, the rollers are inclined toward the center. The force vectors generated by the offset rollers can be summed and equations for movements in all directions can be derived.</p><p><!-- HTML_TAG_START --><img src="https://gm0.org/en/latest/_images/mecanum-drive-force-diagram.png" alt="Mecanum Drivetrain"
style="margin-right:auto" /><!-- HTML_TAG_END --></p><p>Vectors 1, 2, 3, and 4 in the figure above represent the force vectors produced by the mecanum wheels when the chassis is told to move toward the top of the picture. Every motor is moving ahead. Their X and Y components are shown by the blue and red lines, respectively.</p><blockquote><p><strong>Note</strong>
DO NOT HARDCODE THE WHEEL MOVEMENTS, THESE CAN BE PROGRAMMATICALLY COMPUTED</p></blockquote><blockquote><p><strong>Note</strong>
It is important to note that because of friction, perfect movement isn’t possible in every direction.</p></blockquote><h2 id="deriving-mecanum-control-equations">Deriving Mecanum Control Equations</h2><h4 id="direction">Direction</h4><p>Because the motors are facing away from each other, one side of your robot's motor should be reversed. If your mecanum wheels are connected directly to the motors then reverse the left side motors. If your mecanum wheels are connected to with a gear ratio then reverse the right side motors.</p><pre class="sql"><code> SET leftBackMotor DIRECTION TO REVERSE
 SET leftFrontMotor DIRECTION TO REVERSE</code></pre><p><!-- HTML_TAG_START --><img src="https://imgur.com/Hj3hzI2.png" alt="Mecanum Drivetrain"
style="margin-right:auto" /><!-- HTML_TAG_END --></p><h4 id="linear-motion">Linear Motion</h4><p>Joysticks can be used to input x and y coordinates. The forward motion is controlled by the y-axis and the sideways motion (strafe) is controlled by the x-axis.</p><blockquote><blockquote><p><strong>Reminder</strong>
The y-axis is inverted, so the forward motion is negative when the joystick is pushed forward.</p></blockquote></blockquote><pre class="sql"><code> SET forward TO -gamepad1.left_stick_y
 SET strafe TO gamepad1.left_stick_x</code></pre><p><!-- HTML_TAG_START --><img src="https://imgur.com/vhUFgzJ.png" alt="Mecanum Drivetrain"
style="margin-right:auto" /><!-- HTML_TAG_END --></p><h5 id="deriving-linear-motion-equations">Deriving Linear Motion Equations</h5><p>For the robot to move forward, we would need all wheels to have a positive power. Therefore, in the equation, all motor equation have forward as positive.</p><pre class="sql"><code> SET leftFrontMotorPower TO forward
 SET rightFrontMotorPower TO forward
 SET leftBackMotorPower TO forward
 SET rightBackMotorPower TO forward</code></pre><p>To incorporate strafing, consider moving right, ie: a positive strafe value. We would require left wheels to move in opposite direction away from each other (with the front left wheel going forward). We would also need the right going in opposite direction coming together (with the front right wheel going backward). This can be seen in the figure 1.</p><pre class="sql"><code> SET leftFrontMotorPower TO forward + strafe
 SET rightFrontMotorPower TO forward - strafe
 SET leftBackMotorPower TO forward - strafe
 SET rightBackMotorPower TO forward + strafe</code></pre><h4 id="rotational-motion">Rotational Motion</h4><p>The turning motion is controlled by the x-axis of the right joystick. Moving the joystick to the right will cause the robot to turn clockwise.</p><pre class="sql"><code> SET turn TO gamepad1.right_stick_x</code></pre><p><!-- HTML_TAG_START --><img src="https://imgur.com/Wju0Ls2.png" alt="Mecanum Drivetrain"
style="margin-right:auto" /><!-- HTML_TAG_END --></p><h5 id="deriving-rotational-motion-equations">Deriving Rotational Motion Equations</h5><p>To turn clockwise, we would need the right wheels to move backwards whilst the left wheels are moving forward.</p><pre class="sql"><code> SET leftFrontMotorPower TO turn
 SET rightFrontMotorPower TO -turn
 SET leftBackMotorPower TO turn
 SET rightBackMotorPower TO -turn</code></pre><h4 id="combining-linear-and-rotational-motion">Combining Linear and Rotational Motion</h4><p>To combine linear and rotational motion, we would need to add the rotational motion to the linear motion equations.</p><pre class="sql"><code> SET leftFrontMotorPower TO forward + strafe + turn
 SET rightFrontMotorPower TO forward - strafe - turn
 SET leftBackMotorPower TO forward - strafe + turn
 SET rightBackMotorPower TO forward + strafe - turn</code></pre><p><!-- HTML_TAG_START --><img src="https://imgur.com/f92pXII.png" alt="Mecanum Drivetrain"
style="margin-right:auto" /><!-- HTML_TAG_END --></p><h4 id="normalizing-motor-powers">Normalizing Motor Powers</h4><p>The motor powers are normalized to ensure that the robot moves uniformly. If a motor has a power greater than 1 then it clipped to 1. This would lead to the robot moving weirdly.</p><pre class="sql"><code> SET maxPower TO MAX( 1, ABS(forward) + ABS(strafe) + ABS(turn) )
 SET leftFrontMotorPower TO leftFrontMotorPower / maxPower
 SET rightFrontMotorPower TO rightFrontMotorPower / maxPower
 SET leftBackMotorPower TO leftBackMotorPower / maxPower
 SET rightBackMotorPower TO rightBackMotorPower / maxPower</code></pre><h2 id="the-full-pseudocode">The Full Pseudocode</h2><pre class="sql"><code>START
    # Remember one side of the robot's wheel should be reversed: the left side.

    SET forward TO -gamepad.left_stick_y # The y axis of the joystick is flipped with regards to the cartesian plane.
    SET strafe TO gamepad.left_stick_x
    SET turn TO gamepad.right_stick_x

    SET leftFrontMotorPower TO forward + strafe + turn
    SET rightFrontMotorPower TO forward - strafe - turn
    SET leftBackMotorPower TO forward - strafe + turn
    SET rightBackMotorPower TO forward + strafe - turn

    SET maxPower TO MAX( 1, ABS(forward) + ABS(strafe) + ABS(turn) )
    SET leftFrontMotorPower TO leftFrontMotorPower / maxPower
    SET rightFrontMotorPower TO rightFrontMotorPower / maxPower
    SET leftBackMotorPower TO leftBackMotorPower / maxPower
    SET rightBackMotorPower TO rightBackMotorPower / maxPower

    SET leftFrontMotor POWER TO leftFrontMotorPower
    SET rightFrontMotor POWER TO rightFrontMotorPower
    SET leftBackMotor POWER TO leftBackMotorPower
    SET rightBackMotor POWER TO rightBackMotorPower

STOP.</code></pre><h3 id="the-full-blocks-code">The Full Blocks Code</h3><p><!-- HTML_TAG_START --><img src="https://imgur.com/byaSA7D.png" alt="Mecanum Drivetrain"
style="margin-right:auto" /><!-- HTML_TAG_END --></p><h3 id="citations-and-additional-resources">Citations and Additional Resources</h3><pre class=""><code>https://www.youtube.com/watch?v=gnSW2QpkGXQ
https://www.youtube.com/watch?v=Xrc0l4TDnyw
https://www.youtube.com/watch?v=Ne09Y72zW_Y
https://seamonsters-2605.github.io/archive/mecanum/
https://ftcforum.usfirst.org/forum/ftc-technology/android-studio/6361-mecanum-wheels-drive-code-example
https://www.tutorialspoint.com/java/number_atan2.htm
http://thinktank.wpi.edu/resources/346/ControllingMecanumDrive.pdf</code></pre>
</article>


		<script type="module" data-sveltekit-hydrate="1wdkyxh">
			import { start } from "../../_app/immutable/start-7e576363.js";

			start({
				env: {},
				hydrate: {
					status: 200,
					error: null,
					node_ids: [0, 8],
					params: {slug:"programming-mecanum-wheels"},
					route: {"id":"/resources/blog/[slug]"},
					data: [null,{type:"data",data:{metadata:{authorId:"orville-daley",slug:"programming-mecanum-wheels",tags:["programming","robot","drivetrain","chassis"],title:"Programming Mecanum Wheels",imageUrl:"https:\u002F\u002Fimgur.com\u002FPDeFHG4.png",datePublished:"18 November 2022",readTime:"5",description:"Learn to program mecanum wheels in FTC using Blocks. All math and ideas explained in detail."},content:"## The Physics of Mecanum\n\nMecanum wheels are a unique kind of wheel that, in contrast to conventional wheels, allow for mobility and holonomic strafing. They are made up of a number of rubber rollers that have been turned 45 degrees to the left or right.\n\nIn a typical mecanum drivetrain, sideways motion is produced by turning the wheels on one diagonal in the opposite direction from the wheels on the other diagonal. These wheel motions may be combined to move the vehicle in any direction and make it rotate in any direction.\n\nThe four mecanum wheels in a typical mecanum drive system are arranged in a \"X\" pattern. This indicates that when viewed from above, the rollers are inclined toward the center. The force vectors generated by the offset rollers can be summed and equations for movements in all directions can be derived.\n\n\u003Cimg src=\"https:\u002F\u002Fgm0.org\u002Fen\u002Flatest\u002F_images\u002Fmecanum-drive-force-diagram.png\" alt=\"Mecanum Drivetrain\"\nstyle=\"margin-right:auto\" \u002F\u003E\n\nVectors 1, 2, 3, and 4 in the figure above represent the force vectors produced by the mecanum wheels when the chassis is told to move toward the top of the picture. Every motor is moving ahead. Their X and Y components are shown by the blue and red lines, respectively.\n\n\u003E **Note**\n\u003E DO NOT HARDCODE THE WHEEL MOVEMENTS, THESE CAN BE PROGRAMMATICALLY COMPUTED\n\n\u003E **Note**\n\u003E It is important to note that because of friction, perfect movement isn’t possible in every direction.\n\n## Deriving Mecanum Control Equations\n\n#### Direction\n\nBecause the motors are facing away from each other, one side of your robot's motor should be reversed. If your mecanum wheels are connected directly to the motors then reverse the left side motors. If your mecanum wheels are connected to with a gear ratio then reverse the right side motors.\n\n```sql\n SET leftBackMotor DIRECTION TO REVERSE\n SET leftFrontMotor DIRECTION TO REVERSE\n```\n\n\u003Cimg src=\"https:\u002F\u002Fimgur.com\u002FHj3hzI2.png\" alt=\"Mecanum Drivetrain\"\nstyle=\"margin-right:auto\" \u002F\u003E\n\n#### Linear Motion\n\nJoysticks can be used to input x and y coordinates. The forward motion is controlled by the y-axis and the sideways motion (strafe) is controlled by the x-axis.\n\n\u003E \u003E **Reminder**\n\u003E \u003E The y-axis is inverted, so the forward motion is negative when the joystick is pushed forward.\n\n```sql\n SET forward TO -gamepad1.left_stick_y\n SET strafe TO gamepad1.left_stick_x\n```\n\n\u003Cimg src=\"https:\u002F\u002Fimgur.com\u002FvhUFgzJ.png\" alt=\"Mecanum Drivetrain\"\nstyle=\"margin-right:auto\" \u002F\u003E\n\n##### Deriving Linear Motion Equations\n\nFor the robot to move forward, we would need all wheels to have a positive power. Therefore, in the equation, all motor equation have forward as positive.\n\n```sql\n SET leftFrontMotorPower TO forward\n SET rightFrontMotorPower TO forward\n SET leftBackMotorPower TO forward\n SET rightBackMotorPower TO forward\n```\n\nTo incorporate strafing, consider moving right, ie: a positive strafe value. We would require left wheels to move in opposite direction away from each other (with the front left wheel going forward). We would also need the right going in opposite direction coming together (with the front right wheel going backward). This can be seen in the figure 1.\n\n```sql\n SET leftFrontMotorPower TO forward + strafe\n SET rightFrontMotorPower TO forward - strafe\n SET leftBackMotorPower TO forward - strafe\n SET rightBackMotorPower TO forward + strafe\n```\n\n#### Rotational Motion\n\nThe turning motion is controlled by the x-axis of the right joystick. Moving the joystick to the right will cause the robot to turn clockwise.\n\n```sql\n SET turn TO gamepad1.right_stick_x\n```\n\n\u003Cimg src=\"https:\u002F\u002Fimgur.com\u002FWju0Ls2.png\" alt=\"Mecanum Drivetrain\"\nstyle=\"margin-right:auto\" \u002F\u003E\n\n##### Deriving Rotational Motion Equations\n\nTo turn clockwise, we would need the right wheels to move backwards whilst the left wheels are moving forward.\n\n```sql\n SET leftFrontMotorPower TO turn\n SET rightFrontMotorPower TO -turn\n SET leftBackMotorPower TO turn\n SET rightBackMotorPower TO -turn\n```\n\n#### Combining Linear and Rotational Motion\n\nTo combine linear and rotational motion, we would need to add the rotational motion to the linear motion equations.\n\n```sql\n SET leftFrontMotorPower TO forward + strafe + turn\n SET rightFrontMotorPower TO forward - strafe - turn\n SET leftBackMotorPower TO forward - strafe + turn\n SET rightBackMotorPower TO forward + strafe - turn\n```\n\n\u003Cimg src=\"https:\u002F\u002Fimgur.com\u002Ff92pXII.png\" alt=\"Mecanum Drivetrain\"\nstyle=\"margin-right:auto\" \u002F\u003E\n\n#### Normalizing Motor Powers\n\nThe motor powers are normalized to ensure that the robot moves uniformly. If a motor has a power greater than 1 then it clipped to 1. This would lead to the robot moving weirdly.\n\n```sql\n SET maxPower TO MAX( 1, ABS(forward) + ABS(strafe) + ABS(turn) )\n SET leftFrontMotorPower TO leftFrontMotorPower \u002F maxPower\n SET rightFrontMotorPower TO rightFrontMotorPower \u002F maxPower\n SET leftBackMotorPower TO leftBackMotorPower \u002F maxPower\n SET rightBackMotorPower TO rightBackMotorPower \u002F maxPower\n```\n\n## The Full Pseudocode\n\n```sql\nSTART\n\t# Remember one side of the robot's wheel should be reversed: the left side.\n\n\tSET forward TO -gamepad.left_stick_y # The y axis of the joystick is flipped with regards to the cartesian plane.\n\tSET strafe TO gamepad.left_stick_x\n\tSET turn TO gamepad.right_stick_x\n\n\tSET leftFrontMotorPower TO forward + strafe + turn\n\tSET rightFrontMotorPower TO forward - strafe - turn\n\tSET leftBackMotorPower TO forward - strafe + turn\n\tSET rightBackMotorPower TO forward + strafe - turn\n\n\tSET maxPower TO MAX( 1, ABS(forward) + ABS(strafe) + ABS(turn) )\n\tSET leftFrontMotorPower TO leftFrontMotorPower \u002F maxPower\n\tSET rightFrontMotorPower TO rightFrontMotorPower \u002F maxPower\n\tSET leftBackMotorPower TO leftBackMotorPower \u002F maxPower\n\tSET rightBackMotorPower TO rightBackMotorPower \u002F maxPower\n\n\tSET leftFrontMotor POWER TO leftFrontMotorPower\n\tSET rightFrontMotor POWER TO rightFrontMotorPower\n\tSET leftBackMotor POWER TO leftBackMotorPower\n\tSET rightBackMotor POWER TO rightBackMotorPower\n\nSTOP.\n```\n\n### The Full Blocks Code\n\n\u003Cimg src=\"https:\u002F\u002Fimgur.com\u002FbyaSA7D.png\" alt=\"Mecanum Drivetrain\"\nstyle=\"margin-right:auto\" \u002F\u003E\n\n### Citations and Additional Resources\n\n```\nhttps:\u002F\u002Fwww.youtube.com\u002Fwatch?v=gnSW2QpkGXQ\nhttps:\u002F\u002Fwww.youtube.com\u002Fwatch?v=Xrc0l4TDnyw\nhttps:\u002F\u002Fwww.youtube.com\u002Fwatch?v=Ne09Y72zW_Y\nhttps:\u002F\u002Fseamonsters-2605.github.io\u002Farchive\u002Fmecanum\u002F\nhttps:\u002F\u002Fftcforum.usfirst.org\u002Fforum\u002Fftc-technology\u002Fandroid-studio\u002F6361-mecanum-wheels-drive-code-example\nhttps:\u002F\u002Fwww.tutorialspoint.com\u002Fjava\u002Fnumber_atan2.htm\nhttp:\u002F\u002Fthinktank.wpi.edu\u002Fresources\u002F346\u002FControllingMecanumDrive.pdf\n```\n"},uses:{params:["slug"]}}],
					form: null
				},
				paths: {"base":"","assets":""},
				target: document.querySelector('[data-sveltekit-hydrate="1wdkyxh"]').parentNode,
				trailing_slash: "never"
			});
		</script>
	</div>
</body>

</html>